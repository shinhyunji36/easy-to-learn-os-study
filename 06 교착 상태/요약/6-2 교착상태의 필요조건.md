# 6-2. 교착 상태 필요조건

## 교착 상태 필요 조건
>교착 상태는 아래 조건들을 **모두 충족**해야 발생한다.
- 상호 배제(mutual exclusion)
- 비선점(non-preemption)
- 점유와 대기(hold and wait)
- 원형 대기(circular wait)
<br>
<br>

> ### 상호 배제 → 자원의 특징

  - 한 프로세스가 사용하는 자원은 **다른 프로세스가 공유할 수 없는 배타적인 자원**이어야 한다.
  - 배타적인 자원은 **임계구역**으로 보호되기 때문에 동시에 사용할 수 없고, 이 때문에 교착 상태가 발생한다.
<br>
<br>

> ### 비선점 → 자원의 특징
- 한 프로세스가 사용중인 자원은 **중간에 다른 프로세스가 빼앗을 수 없는 비선점 자원**.
- 어떤 자원을 빼앗을 수 있다면, 시간 간격을 두고 자원을 공유할 수 있고, 교착 상태가 발생하지 않을 것.
- 그러나 자원을 뺏을 수 없는 경우, 공유도 할 수 없기 때문에 교착 상태 발생
<br>
<br>
    
### 상호 배제와 비선점
- 자원이 어떤 특징을 가지는지 나타냄
- 임계 구역과 관련
    - 임계 구역을 보호하기 위해 잠금 장치를 사용하면 상호 배제와 비선점 조건이 보장되기 때문에 교착 상태가 발생할 수 있다.
- 임계 구역으로 보호되는 자원을 사용하는 프로세스들이 점유와 대기, 원형 대기 상황에 처하면 교착상태가 발생한다.
<br>
<br>

> ### 점유와 대기 → 프로세스의 행위
- 프로세스가 어떤 자원을 할당받은 상태에서 다른 자원을 기다리는 상태여야 한다.
- 다른 프로세스의 작업 진행을 방해하는 교착 상태가 발생하기 위해선 **다른 프로세스가 필요로 하는 자원을 점유**하고 있으면서 또 **다른 자원을 기다리는 상태**가 되어야 한다.
- 프로세스가 특정 자원에 대해 점유와 대기를 한다고 해서 무조건 교착 상태에 빠지는 것은 X (+원형 대기)
<br>
<br>

> ### 원형 대기 → 프로세스의 행위
- 점유와 대기를 하는 프로세스 간 관계가 원을 이루어야 한다.
- **점유와 대기를 하는 프로세스들이 서로 방해하는 방향이 원**을 이루면, 프로세스들이 **서로 양보하지 않기 때문에** 교착 상태에 빠진다.
- 원을 이룬다는 것은 작업을 진행하는 쪽, 기다리는 쪽의 선후 관계를 결정할 수 없어 문제가 계속 맴돈다는 의미.
- 점유와 대기를 하는 프로세스들이 원을 이루며 서로 방해하는 상태가 되므로 교착 상태 발생
<br>
<br>

> ### 교착 상태와 아사 현상 차이
- **아사 현상**
    - 정책상 잘못이나 오류로 인해 특정 프로스세의 작업이 이루어지지 않는 것
    - ex. 작업 시간이 긴 프로세스가 작업 시간이 짧은 프로세스 때문에 작업이 진행되지 못하는 경우를 아사 현상이라고 일컬음. 
    - 아사 현상은 몇 번 양보했다면 더 양보하지 않도록 조정하는 에이징(나이 먹기)로 해결 가능
<br>
<br>

- **교착 상태**
  - 교착 상태는 아사 현상과 다르게, 정책상 잘못이나 오류가 없어도 자연적으로 발생하므로 에이징으로 해결할 수 없고 정책을 바꾼다고 막을 수도 없다.
  - 교착 상태는 아사 현상보다 처리하기 복잡하기 때문에 이를 해결하기 위해 **예방, 회피, 검출** 등의 방법이 제시 되었다.
  

